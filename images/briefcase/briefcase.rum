REDIT FILE from 6.4.1998 16:38:37
kufrik
kufrik
1 1 5 10 5 0 0 0 0 0  Params
-2147483632 Grid
48 37
kufrik-p.BMP
0 obsolete
0 Ext
kufrik-w.BMP
65280 Mask
0 Ext
766 WlList
768 1024 1280 1536 1792 2048 2304 2560 2816
3072 3328 3584 3840 4096 4352 4608 4864 5120 5376
5632 5888 6144 6400 6656 6912 7168 7424 7680 7936
8192 8448 8704 8960 9216 1 1537 1793 2049 2305
2561 2817 3073 3329 3585 4865 5121 5377 6401 6657
6913 8193 8449 8705 8961 9217 2 258 1794 2050
2306 2562 2818 3074 3330 5122 6658 8706 8962 9218
3 259 515 2307 2563 2819 3075 3331 5123 6659
8707 8963 9219 4 260 516 2564 2820 3076 5124
6660 8964 9220 261 517 773 2565 2821 3077 6661
8965 9221 262 518 774 1030 2566 2822 3078 8966
9222 263 519 775 1031 2567 2823 3079 8967 9223
520 776 1032 2568 2824 3080 8968 9224 521 777
1033 2569 2825 3081 3337 3593 8969 9225 522 778
1034 2570 2826 3082 3338 3594 8970 9226 523 779
1035 2571 2827 3083 3339 3595 4619 8971 9227 524
780 1036 2572 2828 3084 3340 3596 4620 8972 9228
525 781 1037 2573 2829 3085 3341 3597 7693 8973
9229 526 782 1038 1294 2574 2830 3086 3342 3598
7694 8974 9230 527 783 1039 1295 2575 2831 3087
3343 3599 3855 7695 8719 8975 9231 272 528 784
1040 1296 1552 2576 2832 3088 3344 3600 3856 4112
4368 4624 7440 7696 7952 8720 8976 9232 273 529
785 1041 1297 1553 3601 3857 4113 4369 4625 4881
5137 5393 7185 7441 7697 7953 8209 8465 8721 8977
9233 274 530 786 1042 1298 3602 3858 4114 4370
4626 8722 8978 9234 275 531 787 1043 3603 3859
4115 4371 4627 8979 9235 276 532 788 1044 3604
3860 4116 4372 9236 277 533 789 1045 3605 3861
4117 4373 9237 278 534 790 1046 3606 3862 4118
4374 7446 7702 7958 9238 535 791 1047 3607 3863
4119 4375 4631 7447 7703 7959 8215 9239 792 1048
3608 3864 4120 4376 7704 7960 8216 9240 793 1049
1305 3609 3865 4121 4377 6169 6425 6681 6937 7193
7449 7705 7961 8217 9241 794 1050 1306 3610 3866
4122 4378 6170 6426 6682 6938 7194 7450 7706 7962
8218 8474 9242 795 1051 1307 3611 3867 4123 4379
4635 6171 6427 6683 6939 7195 7451 7707 7963 8219
8475 9243 796 1052 1308 3612 6172 6428 6684 6940
7196 7452 7708 7964 8220 8476 9244 541 797 1053
6685 6941 7197 7453 7709 7965 8221 8477 9245 542
798 1054 4894 6686 6942 7198 7454 7710 7966 8222
8478 9246 543 799 1055 1311 4127 4383 4639 4895
5151 5407 6943 7199 7455 7711 7967 8223 8479 9247
800 1056 1312 4128 4384 4640 4896 5152 5408 6944
7200 7456 7712 7968 8224 8480 9248 801 1057 1313
1569 1825 4385 4641 4897 5153 7201 7457 7713 7969
8225 8481 9249 1058 1314 1570 1826 4386 4642 7202
7458 7714 7970 8226 8482 9250 1059 1315 1571 1827
7203 7459 7715 7971 8227 8483 9251 804 1060 1316
1572 1828 7204 7460 7716 7972 8228 8484 9252 805
1061 1317 1573 1829 6949 7205 7461 7717 7973 8229
8485 9253 806 1062 1318 1574 1830 2086 6950 7206
7462 7718 7974 8230 8486 9254 551 807 1063 1319
1575 1831 2087 2343 6695 6951 7207 7463 7719 7975
8231 9255 552 808 1064 1320 1576 1832 2088 2344
2600 2856 6440 6696 6952 7208 7464 7720 7976 8232
9256 809 1065 1321 1577 1833 2089 2345 2601 2857
3113 3369 5929 6185 6441 6697 6953 7209 7465 7721
7977 8233 9257 810 1066 1322 1578 1834 2090 2346
2602 2858 3114 3370 3626 3882 4138 4394 4650 4906
5162 5418 5674 5930 6186 6442 6698 6954 7210 7466
7722 7978 9258 1067 1323 1579 1835 2091 2347 2603
2859 3115 3371 3627 3883 4139 4395 4651 4907 5163
5419 5675 5931 6187 6443 6699 6955 7211 7467 7723
7979 9259 1068 1324 1580 1836 2092 2348 2604 2860
3116 3372 3628 3884 4140 4396 4652 4908 5164 5420
5676 5932 6188 6444 6700 6956 7212 7468 7724 7980
9004 9260 1325 1581 1837 2093 2349 2605 2861 3117
3373 3629 3885 4141 4397 4653 4909 5165 5421 5677
5933 6189 6445 6701 6957 7213 7469 7725 7981 9005
9261 1582 1838 2094 2350 2606 2862 3118 3374 3630
3886 4142 4398 4654 4910 5166 5422 5678 5934 6190
6446 6702 6958 7214 7470 7726 7982 9006 9262 1583
1839 2095 2351 2607 2863 3119 3375 3631 3887 4143
4399 4655 4911 5167 5423 5679 5935 6191 6447 6703
6959 7215 7471 7727 7983 9007 9263
12 Prg1
name room
var uvod
var do_prace
var znovu
var dilna
var zvedni
ini
uvod:=0;
do_prace:=0;
znovu:=0;
dilna:=0;
zvedni:=0;
81 Prg2
if zije[mala]and zije[velka] then
 begin
  if not showmode and (malar.X=25)and(malar.Y=23)and
    (velkar.X=27)and(velkar.Y=21) then
    begin
      showmode:=true;
      if natoceni[velka]<>smer_vlevo then
        begin
          natoceni[velka]:=smer_vlevo;
          ToRecord('A');
        end;
      assignfile(fcapture,PathIntro+'help.cap');
      reset(fcapture);
      helptext:=0;
    end;
  if not showmode and no_dialog then
    begin
      if uvod=0 then
        begin
          case pokus of
            1:begin
                addm(6,'kuf-m-je');
                addv(4,'kuf-v-noco');
                addv(9,'kuf-v-hod');
              end;
            2:addv(9,'kuf-v-hod');
            else
              case random(3) of
                0:;
                1:addv(9,'kuf-v-hod');
                2:addm(6,'kuf-m-je');
              end;
          end;
          uvod:=1;
        end
      else if (do_prace=0)and(kufr.hotovo=1) then
        begin
          case pokus of
            1:addv(10,'kuf-v-doprace');
            2:addv(10,'kuf-v-dotoho');
            else case random(2) of
              0:addv(10,'kuf-v-doprace');
              1:addv(10,'kuf-v-dotoho');
            end;
          end;
          addm(5,'kuf-m-ven');
          addv(0,'kuf-v-ukol');
          do_prace:=1;
        end
      else if (znovu=0)and(do_prace=1)and(dilna=0)and(random(100)<5) then
        begin
          case pokus of
            1:begin
                addv(20,'kuf-v-jeste');
                addm(2,'kuf-m-disk');
                addv(6,'kuf-v-restart');
                addm(3,'kuf-m-pravda');
              end;
          end;
          znovu:=1;
        end
      else if (dilna=0)and(znovu=1)and((malar.Y>=22)or(velkar.Y>=22)) then
        begin
          addm(30,'kuf-m-dodilny');
          addv(5,'kuf-v-napad');
          dilna:=1;
        end
      else if (zvedni=0)and(ocel.Y=18)and(malar.Y>=22)and(malar.Y<=24)and
             (malar.X>=29)and(malar.X<=30) then
        begin
          zvedni:=1;
          addm(0,'kuf-m-nezvednu');
        end
      else if (zvedni<=1)and(ocel.Y=16)and(random(100)<7) then
        begin
          zvedni:=2;
          addm(0,'kuf-m-kousek');
        end;
    end;
  end;             
  
10 Items
10 3 8 7
kufr0.BMP
65280 Mask
1 Kind
10 Ext
7 Prg1
name kufr
var faze
var delay
var hotovo
ini
faze:=0;
hotovo:=0;
49 Prg2
case faze of 
  0:if dir=dir_down then inc(faze);
  1:begin
      afaze:=0;
      if dir=dir_no then inc(faze);
    end;
  2..6:
    begin
      afaze:=faze-2;
      inc(faze);
    end;
  7:begin
      delay:=3;
      inc(faze);
    end;
  8:if delay>0 then dec(delay)
    else
      begin
        InitKufrDemo;
        inc(faze);
      end;
  9:begin
      delay:=4;
      inc(faze);
    end;
  10..13:
    if delay>0 then dec(delay)
    else
      begin
        afaze:=13-faze;
        inc(faze);
      end;
 14:begin
      delay:=37;
      inc(faze);
    end;      
 15:if delay>0 then dec(delay)
    else inc(faze);
 16..21:
    begin
      afaze:=faze-11;
      inc(faze);
    end;
 22:begin
      afaze:=0;
      inc(faze);
      kufr.hotovo:=1;
    end;
end;
24 List
1024 1280 1536 1025 1281 1537 1026 1282 1538
1027 1283 1539 1028 1284 1540 1029 1285 1541 1030
1286 1542 1031 1287 1543
2 4 3 1
2-Mala.bmp
65280 Mask
3 Kind
0 Ext
1 Prg1
name malar
0 Prg2
3 List
0 1 2
3 6 4 2
3-Velka.bmp
65280 Mask
4 Kind
0 Ext
1 Prg1
name velkar
0 Prg2
8 List
0 256 1 257 2 258 3 259
28 18 2 6
4-Ocel.bmp
65280 Mask
2 Kind
0 Ext
1 Prg1
name ocel
6 Prg2
if ocel.dir<>dir_no then 
  begin 
    room.dilna:=1;
    room.do_prace:=1;
    room.znovu:=1;
  end;
7 List
0 256 512 768 1024 1280 1281
24 18 3 5
cedule.BMP
65280 Mask
1 Kind
0 Ext
0 Prg1
0 Prg2
15 List
0 256 512 768 1024 1 257 513 769
1025 2 258 514 770 1026
25 23 1 1
matka A.BMP
65280 Mask
1 Kind
0 Ext
0 Prg1
0 Prg2
1 List
0
5 23 4 3
kladivo.BMP
65280 Mask
1 Kind
0 Ext
0 Prg1
0 Prg2
6 List
0 256 512 257 258 259
11 27 5 3
kleste.BMP
65280 Mask
1 Kind
0 Ext
0 Prg1
0 Prg2
12 List
0 256 512 1 257 513 2 514 3
515 4 516
11 15 2 3
kanystr.BMP
16711935 Mask
1 Kind
0 Ext
0 Prg1
0 Prg2
5 List
256 512 1 257 513
13 26 2 1
10-Ocel.bmp
65280 Mask
2 Kind
0 Ext
0 Prg1
0 Prg2
2 List
0 1
EOF
